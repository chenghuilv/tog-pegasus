# Testcase for applyProjection with embedded objects.
# 
# Wildcard the FROM class.  
# Project every property on the FROM class
SELECT * FROM CQL_EmbeddedSubClass
# 
# Wildcard the first level embedded object
# Project every property on the class of the embedded object    
SELECT EmbObjBase.* FROM CQL_EmbeddedSubClass 
SELECT EmbObjSub.* FROM CQL_EmbeddedSubClass
#
# Wildcard the second level embedded object
# Project every property on the class of the embedded object 
SELECT EmbObjBase.CQL_EmbeddedTestElement::TE.* FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::CS.* FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::TEArray[1].* FROM CQL_EmbeddedSubClass
SELECT EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.* FROM CQL_EmbeddedSubClass
SELECT EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPTArray[1].* FROM CQL_EmbeddedSubClass
// next ones are illegal
SELECT EmbObjBase.CQL_EmbeddedTestElement::TEArray.* FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::SomeClass.* FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::SomeString.* FROM CQL_EmbeddedSubClass
#
# Selected properties at the first level
# Project every property on the embedded object, which is not necessarily
# every property on the class of the embedded object
SELECT EmbObjBase FROM CQL_EmbeddedSubClass
SELECT EmbObjSub FROM CQL_EmbeddedSubClass
#
# Selected properties at the second level
# Project every property on the embedded object, which is not necessarily
# every property on the class of the embedded object
SELECT EmbObjBase.SomeString FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::TE FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::CS FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::TEArray FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::TEArray[2] FROM CQL_EmbeddedSubClass
SELECT EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT FROM CQL_EmbeddedSubClass
SELECT EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPTArray FROM CQL_EmbeddedSubClass
SELECT EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPTArray[2] FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::SomeClass FROM CQL_EmbeddedSubClass
#
# Selected properties at the third level
# These are the primitives
SELECT EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestElement::InstanceId FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::EnabledState FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::TEArray[0].CQL_TestElement::InstanceId FROM CQL_EmbeddedSubClass
SELECT EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array FROM CQL_EmbeddedSubClass
SELECT EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPTArray[0].CQL_TestPropertyTypes::propertyDatetimeArray FROM CQL_EmbeddedSubClass
# next ones are illegal
SELECT EmbObjBase.CQL_EmbeddedTestElement::TEArray.CQL_TestElement::InstanceId FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::SomeClass.RequestedState FROM CQL_EmbeddedSubClass
SELECT EmbObjBase.CQL_EmbeddedTestElement::SomeString.CQL_TestElement::InstanceId FROM CQL_EmbeddedSubClass
#
#
# Multiple projected properties to test the embedded object tree handling.
# The list of projected properties is given for each testcase below.
#
# 
# This test projects all the nodes in the path to one leaf property (propertyReal64Array).
# Projected Properties:
# EmbObjSub
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array
#
SELECT EmbObjSub, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array FROM CQL_EmbeddedSubClass
#
# This test is the same as above, but adds in some siblings below the first level (propertyString, SomeUint8),
# and mixes the projection order.
# Projected Properties:
# EmbObjSub
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString
#
SELECT EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array, EmbObjSub, EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8 FROM CQL_EmbeddedSubClass
#
# This test is the same as above, but projects on the subtree of first level sibling (EmbObjBase), 
# and mixes the projection order.
# Projected Properties:
# EmbObjSub
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString
# EmbObjBase.CQL_EmbeddedTestElement::SomeString 
# EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestElement::InstanceId 
# EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::EnabledState 
# EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::Description 
#
SELECT EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::EnabledState, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString, EmbObjBase.CQL_EmbeddedTestElement::SomeString, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array, EmbObjSub, EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestElement::InstanceId, EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8, EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::Description FROM CQL_EmbeddedSubClass
#
# This test is the same as above, but add in some wildcards, and mixes the projection order.
# Projected Properties:
# EmbObjSub
# EmbObjSub.*
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.*
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString
# EmbObjBase.CQL_EmbeddedTestElement::SomeString 
# EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestElement::InstanceId 
# EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::EnabledState 
# EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::Description 
#
SELECT EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::EnabledState, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.*, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString, EmbObjBase.CQL_EmbeddedTestElement::SomeString, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyReal64Array, EmbObjSub, EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestElement::InstanceId, EmbObjSub.*, EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8, EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_ComputerSystem::Description FROM CQL_EmbeddedSubClass
#
# Mix up the scoping classes.
# See '==>' below for details about which properties are projected, and which are not.
# Projected Properties:
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8                       => scope matches, project
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestElement::InstanceId => scope is superclass, project
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString => scope matches, project
# EmbObjBase.CQL_EmbeddedTestElement::SomeString                           => scope matches, project
# EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestPropertyTypes::InstanceId => scope is subclass, ignore  
# EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_NonExistent::EnabledState     => scope doesn't exist, ignore
# EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_Process::Description          => scope is unrelated, ignore 
SELECT EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestPropertyTypes::InstanceId, EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8, EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_Process::Description, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestElement::InstanceId, EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_NonExistent::EnabledState, EmbObjBase.CQL_EmbeddedTestElement::SomeString FROM CQL_EmbeddedSubClass FROM CQL_EmbeddedSubClass
#
#
# Missing required property.
# The NotThere property is missing in this case.  Even though the property is not on its scoping
# class, it is still missing with respect to the instance being projected.  Properties
# missing with respect to the class definition are checked by validateProperties, not applyProjection.
# 
# Projected Properties:
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8                       => scope matches, project
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestElement::InstanceId => scope is superclass, project
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::NotThere => property is missing 
# EmbObjBase.CQL_EmbeddedTestElement::SomeString                             => scope matches, project
# EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestPropertyTypes::InstanceId => scope is subclass, ignore  
# EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_NonExistent::EnabledState     => scope doesn't exist, ignore
# EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_Process::Description          => scope is unrelated, ignore 
SELECT EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestPropertyTypes::InstanceId, EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8, EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_Process::Description, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::NotThere, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestElement::InstanceId, EmbObjBase.CQL_EmbeddedTestElement::CS.CIM_NonExistent::EnabledState, EmbObjBase.CQL_EmbeddedTestElement::SomeString FROM CQL_EmbeddedSubClass FROM CQL_EmbeddedSubClass
#
# Missing required property, wildcard case.
# 
# Projected Properties:
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8                       => scope matches, project
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestElement::InstanceId => scope is superclass, project
# EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString => scope matches, project 
# EmbObjBase.CQL_EmbeddedTestElement::SomeString                             => scope matches, project
# EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestPropertyTypes::InstanceId => scope is subclass, ignore  
# EmbObjBase.CQL_EmbeddedTestElement::CS.*                                 => wildcard causes missing properties
SELECT EmbObjBase.CQL_EmbeddedTestElement::TE.CQL_TestPropertyTypes::InstanceId, EmbObjSub.CQL_EmbeddedTestPropertyTypes::SomeUint8, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestPropertyTypes::propertyString, EmbObjSub.CQL_EmbeddedTestPropertyTypes::TPT.CQL_TestElement::InstanceId, EmbObjBase.CQL_EmbeddedTestElement::CS.*, EmbObjBase.CQL_EmbeddedTestElement::SomeString FROM CQL_EmbeddedSubClass FROM CQL_EmbeddedSubClass








