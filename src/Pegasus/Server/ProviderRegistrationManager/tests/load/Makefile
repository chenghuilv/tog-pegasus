# Makefile builds a test namespace in the local directory.
# ATTN: Today this makefile is implementation dependent.
#       It assumes that the repository is a set of directories
#       that can be removed by removing the directories.
#       This must be updated to an implementation independent repository
#       remove function.

ROOT = $(PEGASUS_ROOT)
include $(ROOT)/mak/config.mak

REPOSITORYDIR = $(TMP_DIR)
NAMESPACENAME = root/PG_InterOp
NAMESPACEDIR = $(REPOSITORYDIR)/repository/root\#PG_InterOp

# Update the following two environment variables to change the version
# of the PG_Schema to be loaded in the namespace.

PG_SCHEMA_VER=20
PG_SCHEMA_DIR=VER$(PG_SCHEMA_VER)
PG_MOF_PATH = $(ROOT)/Schemas/Pegasus/InterOp/$(PG_SCHEMA_DIR)

all:

# Delete and rebuild the repository using the MOF compiler.

localrep:
	@ $(ECHO) +++++ Removing existing repository named $(NAMESPACEDIR)
	@ $(RMREPOSITORY) $(NAMESPACEDIR)
	@ $(ECHO) +++++ Loading CIM_Core$(CIM_SCHEMA_VER) into $(NAMESPACEDIR) namespace ...
	@ cimmofl "-I$(CIM_SCHEMA_DIR)" "-R$(REPOSITORYDIR)" "-n$(NAMESPACENAME)" $(ALLOW_EXPERIMENTAL) $(CIM_SCHEMA_DIR)/CIM_Core$(CIM_SCHEMA_VER).mof
	@ $(ECHO) +++++ Loading PG_ProviderModule$(PG_SCHEMA_VER) into $(NAMESPACEDIR) namespace ...
	@ cimmofl "-I$(PG_MOF_PATH)" "-R$(REPOSITORYDIR)" "-n$(NAMESPACENAME)" $(PG_MOF_PATH)/PG_ProviderModule$(PG_SCHEMA_VER).mof

clean:
	@ $(ECHO) +++++ Removing existing CIM Repository named $(NAMESPACEDIR)
	@ $(RMREPOSITORY) $(NAMESPACEDIR)

depend:

sub:

misc:

tests:

poststarttests:

general:
