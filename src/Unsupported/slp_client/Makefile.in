VPATH = .

COMPONENTS = all
CLEAN = clean
INSTALL = install


## capture the appropriate environment variables to 
## control the build process
##
export BUILD_ROOT := @abs_builddir@
export SRC_DIR := $(BUILD_ROOT)/src
export BUILD_DIR := $(shell pwd)
export WORDS_BIG_ENDIAN := @WORDS_BIG_ENDIAN@
export PACKAGE := @PACKAGE_NAME@
export PACKAGE_VERSION := @PACKAGE_VERSION@
export DEBUG := @DEBUG@
export LIBTOOL := @abs_builddir@/@LIBTOOL@
export OBJ := @OBJ@
export IGNORE := @IGNORE@
export LIB_PATH := @LIB_PATH@
export LEX := @LEX@
export YACC := @YACC@
export STATIC_LINK_CMD := @STATIC_LINK_CMD@
export DLL_LINK_CMD := @DLL_LINK_CMD@
export MV := @MV@
export MV_FLAGS := @MV_FLAGS@
export RM := @RM@
export RM_FLAGS := @RM_FLAGS@
export CP := @CP@
export CP_FLAGS := @CP_FLAGS@
export MAKE := @MAKE@
export OS_PORT_INC := @OS_PORT_INC@
export OS_PORT_SRC := @OS_PORT_SRC@
export OS_PORT_OBJ := @OS_PORT_OBJ@
export HOST_OS := @HOST_OS@
export LINKER := @LINKER@
export EXE := @EXE@
export LIBS := @LIBS@
export THREAD_LIBS := @THREAD_LIBS@
export REENTRANT_FLAG := @REENTRANT_FLAG@
export NO_LINK_FLAG := @NO_LINK_FLAG@
export LIB_SUFFIX := @LIB_SUFFIX@
export DLL_SUFFIX := @DLL_SUFFIX@
export EXE_OUT := @EXE_OUT@
export OBJ_OUT := @OBJ_OUT@
export LIB_INCLUDE_FLAG := @LIB_INCLUDE_FLAG@
export CFLAGS := @CFLAGS@
export LDFLAGS := @LDFLAGS@
export DLL_LIB_FLAG := @DLL_LIB_FLAG@
export LFLAGS := @LFLAGS@
export YFLAGS := @YFLAGS@
export bindir := @bindir@
export sbindir := @sbindir@
export libexecdir := @libexecdir@
export sysconfdir := @sysconfdir@
export libdir := @libdir@
export PLATFORM := @PLATFORM@
export CC := @CC@

export BINDIR := @bindir@
export SBINDIR := @sbindir@
export LIBEXECDIR := @libexecdir@
export SYSCONFIGDIR := @sysconfdir@
export LIBDIR := @libdir@

all: $(COMPONENTS)
.PHONY: all

clean: $(CLEAN)
.PHONY: clean

install: $(INSTALL)
.PHONY: install

test: $(TEST)
.PHONY: test


SRC_DIRS := $(SRC_DIR) 

$(INSTALL) :
	$(foreach dir, $(SRC_DIRS), cd $(dir) && $(MAKE) all;)
	$(foreach dir, $(SRC_DIRS), cd $(dir) && $(MAKE) $(INSTALL);)
$(COMPONENTS) $(CLEAN) :
	$(foreach dir, $(SRC_DIRS),cd $(dir) && $(MAKE) $@;)


